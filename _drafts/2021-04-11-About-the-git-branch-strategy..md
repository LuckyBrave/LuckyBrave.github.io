---
layout: post
title:  "Git 브랜치 전략에 대해서"
author: "Finn & Ahn"
comments: true
tags: [git, git flow, github flow, gitlab flow]
---

# Git 브랜치 전략들
git flow, github flow, gitlab flow

## Git이란?
Git은 오픈소스로 공개된 버전 컨트롤 시스템이다. 
소프트웨어를 반복적으로 개선해 나가고, 그 과정 중에 동료들과 리뷰를 통해 더 나은 코드로 배포될 수 있도록 도와준다. 
Git 문법에 조금 익숙해 질 만하니, Git 배포에도 전략을 필요로 하니 복잡하고 배울게 많다. 
우선, git flow 부터 천천히 살펴 보겠다.  

## git flow 란?
git flow는 Vincent Driessen을 통해 알려진 git을 활용한 배포 전략이다. 
릴리즈 브랜치, 기능 브랜치, 메인라인(상용 브랜치), 개발브랜치, 핫픽스 브랜치 등으로 구성되어,
데스크탑 어플리케이션처럼 사용자가 다운로드 받아 사용하는 소프르웨어에 적합한 전략으로 알려져 있다.  

### git flow 주의사항
일반적인 웹사이트에서는 git flow 전략은 불필요한 과정들이 수반될 수 있다.
예를 들면, 핫픽스 브랜치와 기능 브랜치가 동일한 프로세스로 운영 시 큰 의미를 갖지 않게 될 수도 있다. 
또한 버전 관리를 하지 않음에도 릴리즈 브랜치 생성 후 기능 브랜치와 병합 단계를 거쳐야 된다. 

### git flow 사용해볼까요?


### git flow 선택 기준
현재 개발하는 소프트웨어가 데스크탑 애플리케이션, 라이브러리등 사용자가 다운로드하는 애플리케이션이라면 git flow에 적합할 수 있고, 
또한 한명 이상의 동료와 같은 기능을 개발한다면 git flow 도입을 검토해도 좋다. 
Pull Request 시점은 특정 custom 브랜치(sandbox, cbt등) 병합 시점이 될 수도 있고,
개발 중인 기능 브랜치를 릴리즈 브랜치에 병합 시점이 Pull Request 시점으로 리뷰 할 타이밍이 된다. 
만약 Pull Request가 승인(approve)가 된다면, 이력이 개발자 본인 이력으로 남기기 위해 병합은 개발자 본인이 진행한다. 
- Pull Request가 반려되었을때 궁금하다. 다시 어게인
- 코드리뷰 시점 및 적용이 용이한지
- 롤백이 용이한지

github flow란?
지속적인 배
github flow 왜 썼는가? 장단점
github flow 사용 예)


gitlab flow 란?
gitlab flow 왜 썼는가? 장단점
gitlab flow 사용 예)

기준 : 배포편의성, 코드리뷰, 롤백, 특징

## SVN에서 git으로
팀에서 5년 동안 Git flow를 사용했다.
해당 시점에 팀내 개발 환경은 로컬, 테스트 서버(2단계), 릴리즈 서버와 상용 서버로 구성되어 있었고
각 단계를 별도의 브랜치로 운영하고 있었다.
당시 SVN에서 Git으로 넘어간지는 꽤 되었으나 우리는 여전히 Git을 SVN처럼 한동안 사용했다.
쏟아지는 과제로 Git에 대한 이해가 부족한 채로 브랜치의 편의성만을 보고 단순 특정 기능의 필요에 의해 git을 도입했다.

## 일단 git flow 도입
svn에 익숙한 팀원들은 불편함을 느끼지 못 했지만 팀원 중 한명의 제안으로 Git flow 도입을 제안했고 사용하기 시작했다.
당시 개발 환경과 Git flow의 브랜치 전략이 어느 정도 맞다고 생각했고 특별히 이견없이 진행됐다.

## git flow 사용 그리고 문제점
그로부터 5년 동안 팀에서 git flow를 기본으로한 git 브랜치 전략을 사용했고
사실 나쁘지 않았다. 다만 팀이 성장하면서 요구 사항이 늘어났고, 요구 사항을 수용하기에는
사소하지만 불편한 점들이 몇가지 보였다. 모호한 역할의 브랜치도 그 중 하나였다.
git flow를 사용하다보면 정확히는 git flow를 베이스로한 우리 팀의 브랜치 전략을 사용하다보면
불필요해 보이는 과정들이 눈에 보이기 시작했다.
팀에 맞는 최적화가 필요하다고 판단했다.
게다가 feature 브랜치의 life cycle이 너무 길게 유지되면서
코드 리뷰의 한계가 보였다.
코드 리뷰를 할라치면 오래된 feature 브랜치인만큼 리뷰량도 상당했다.
초기에는 열정과 의지로 리뷰를 했지만 이내 지쳐버렸다.
이건 다른 팀원들도 마찬가지였다. 

중간에 모호한 역할의 master branch, P.R의 거대함
하지만 사실 이건 git flow의 문제가 아니다.
git flow는 괜찮고 좋았다. 다만 최적화된 방식은 아니였고
우리 적절하게 조절해서 맞춰 썼지 

## 결국 우리에게 맞는 git 브랜치를 설계해야 된다.
검증된 브랜치 전략을 기본으로 팀과 서비스에 맞는 브랜치 전략을 설계하는 게 중요하다.


참고문헌 (웹페이지명, 사이트명, URL)